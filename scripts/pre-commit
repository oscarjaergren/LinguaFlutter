#!/bin/sh
# Pre-commit hook: enforce dart format on staged Dart files.
# Blocks the commit if any staged .dart file is not formatted.

STAGED_DART=$(git diff --cached --name-only --diff-filter=ACM | grep '\.dart$')

if [ -z "$STAGED_DART" ]; then
  exit 0
fi

# Auto-format staged Dart files and re-stage them
dart format . 2>&1
echo "$STAGED_DART" | xargs git add

exit 0
